#!/bin/bash
echo "ğŸ›¡ï¸  æ­£åœ¨å¯åŠ¨ ZenBlock é˜²å¾¡ç³»ç»Ÿ..."

# 1. å®‰è£…ä¾èµ– (å¦‚æœå°šæœªå®‰è£…)
if [ ! -d "node_modules" ]; then
  echo "ğŸ“¦ æ£€æµ‹åˆ°é¦–æ¬¡è¿è¡Œï¼Œæ­£åœ¨è£…å¡«å¼¹è¯ (å®‰è£…ä¾èµ–)..."
  npm install
fi

# 2. æ•°æ®åº“åŒæ­¥
echo "ğŸ’¾ æ­£åœ¨åŒæ­¥è¡Œä¸ºè´¦æœ¬ (Prisma Migrate)..."
npx prisma migrate deploy

# 3. å¯åŠ¨ç”Ÿäº§ç¯å¢ƒæˆ–å¼€å‘ç¯å¢ƒ
echo "ğŸš€ ç³»ç»Ÿå‡ç©ºã€‚"
# ç”Ÿäº§ç¯å¢ƒå»ºè®®å…ˆ npm run buildï¼Œè¿™é‡Œæ¼”ç¤ºå¼€å‘æ¨¡å¼ä¸€é”®å¯åŠ¨
npm run dev